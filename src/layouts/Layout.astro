---
import fs from "fs/promises";
import path from "path";

const { title } = Astro.props;

const description =
	"Join us for Hack the Hill II, a hackathon in heart of Canada's capital from September 27th to 29th, 2024! Joignez nous pour Hack the Hill II, un hackathon au cœur de la capitale du Canada du 27 au 29 septembre 2024!";

const keywords =
	"Ottawa Hackathon, Hackathon, Hack the Hill, Hackathon Ottawa, Hackathon Ontario, Hackathon Canada, Hackathon 2024, University of Ottawa, uOttawa, Capital Hackathon, Canada's Capital Hackathon, International Hackathon, Carleton, Carleton University, Université d'Ottawa, Université Carleton";

const color = "#ea885f";

let structuredData = {} as any;
try {
	structuredData = JSON.parse(await fs.readFile(path.resolve("./public/structured-data.json"), "utf-8"));
	structuredData.description = description;
	structuredData.keywords = keywords;
	structuredData.url = import.meta.env.SITE.replace(/\/$/, "");
	structuredData.image = `${import.meta.env.SITE.replace(/\/$/, "")}/Logos/hackthehill-logo.svg`;
} catch (error) {
	console.error(error);
}
const structuredDataString = JSON.stringify(structuredData);

const url = import.meta.env.SITE.replace(/\/$/, "");
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content={color} />
		<meta name="msapplication-TileColor" content={color} />
		<link rel="mask-icon" href={`${url}/safari-pinned-tab.svg`} color={color} />
		<link rel="manifest" href={`${url}/site.webmanifest`} />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap"
			rel="stylesheet"
		/>
		<title>{title}</title>

		<!-- Google Analytics tags -->
		<script type="text/partytown" src="https://www.googletagmanager.com/gtag/js?id=G-7SJDSSNG3P"></script>
		<script type="text/partytown">
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag("js", new Date());
			gtag("config", "G-7SJDSSNG3P");
		</script>

		<!-- Meta tags for SEO and social media -->
		<meta property="og:description" name="description" content={description} />
		<meta property="og:type" content="website" />
		<meta property="og:title" content={title} />
		<meta property="og:url" content={url} />
		<meta property="og:image" content={`${url}/Logos/hackthehill-banner.svg`} />
		<meta property="og:site_name" content="Hack the Hill" />
		<meta property="og:locale" content="en_US" />

		<!-- Twitter SEO -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@hackthehill_" />
		<meta name="twitter:creator" content="@hackthehill_" />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content={`${url}/Logos/hackthehill-banner.svg`} />
		<meta name="twitter:image:alt" content="Hack the Hill logo" />

		<!-- Keywords -->
		<meta name="keywords" content={keywords} />

		<!-- humans.txt -->
		<link type="text/plain" rel="author" href={`${url}/humans.md`} />

		<!-- Canonical -->
		<link rel="canonical" href={url} />

		<!-- Sitemap -->
		<link rel="sitemap" type="application/xml" title="Sitemap" href={`${url}/sitemap-index.xml`} />

		<!-- robots.txt -->
		<link rel="robots" type="text/plain" title="Robots" href={`${url}/robots.txt`} />

		<!-- Favicons for all devices -->
		<link rel="icon" type="image/svg+xml" href={`${url}/icons/favicon.svg`} />
		<link rel="apple-touch-icon" sizes="180x180" href={`${url}/icons/apple-touch-icon.png`} />
		<link rel="icon" type="image/png" sizes="32x32" href={`${url}/icons/favicon-32x32.png`} />
		<link rel="icon" type="image/png" sizes="16x16" href={`${url}/icons/favicon-16x16.png`} />
		<link rel="apple-touch-icon-precomposed" sizes="57x57" href={`${url}/icons/apple-touch-icon-57x57.png`} />
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href={`${url}/icons/apple-touch-icon-114x114.png`} />
		<link rel="apple-touch-icon-precomposed" sizes="72x72" href={`${url}/icons/apple-touch-icon-72x72.png`} />
		<link rel="apple-touch-icon-precomposed" sizes="144x144" href={`${url}/icons/apple-touch-icon-144x144.png`} />
		<link rel="apple-touch-icon-precomposed" sizes="60x60" href={`${url}/icons/apple-touch-icon-60x60.png`} />
		<link rel="apple-touch-icon-precomposed" sizes="120x120" href={`${url}/icons/apple-touch-icon-120x120.png`} />
		<link rel="apple-touch-icon-precomposed" sizes="76x76" href={`${url}/icons/apple-touch-icon-76x76.png`} />
		<link rel="apple-touch-icon-precomposed" sizes="152x152" href={`${url}/icons/apple-touch-icon-152x152.png`} />
		<link rel="icon" type="image/png" sizes="196x196" href={`${url}/icons/favicon-196x196.png`} />
		<link rel="icon" type="image/png" sizes="96x96" href={`${url}/icons/favicon-96x96.png`} />
		<link rel="icon" type="image/png" sizes="32x32" href={`${url}/icons/favicon-32x32.png`} />
		<link rel="icon" type="image/png" sizes="16x16" href={`${url}/icons/favicon-16x16.png`} />
		<link rel="icon" type="image/png" sizes="128x128" href={`${url}/icons/favicon-128.png`} />
		<meta name="application-name" content="Hack the Hill" />
		<meta name="msapplication-TileColor" content={color} />
		<meta name="msapplication-TileImage" content={`${url}/icons/mstile-144x144.png`} />
		<meta name="msapplication-square70x70logo" content={`${url}/icons/mstile-70x70.png`} />
		<meta name="msapplication-square150x150logo" content={`${url}/icons/mstile-150x150.png`} />
		<meta name="msapplication-wide310x150logo" content={`${url}/icons/mstile-310x150.png`} />
		<meta name="msapplication-square310x310logo" content={`${url}/icons/mstile-310x310.png`} />

		<script type="application/ld+json" set:html={structuredDataString}></script>
	</head>
	<body>
		<slot />
		<style is:global>
			@font-face {
				font-family: Rubik;
				src: url(/fonts/rubik/Rubik-Medium.ttf) format("truetype");
				font-weight: 500;
				font-weight: medium;
				font-display: swap;
			}

			@font-face {
				font-family: Rubik;
				src: url(/fonts/rubik/Rubik-Regular.ttf) format("truetype");
				font-weight: 400;
				font-weight: normal;
				font-display: swap;
			}

			@font-face {
				font-family: Rubik;
				src: url(/fonts/rubik/Rubik-SemiBold.ttf) format("truetype");
				font-weight: 600;
				font-weight: semi-bold;
				font-display: swap;
			}

			@font-face {
				font-family: Rubik;
				src: url(/fonts/rubik/Rubik-VariableFont_wght.ttf) format("truetype-variations");
				font-weight: 300 400 500 600 700 800 900;
				font-display: swap;
			}

			@font-face {
				font-family: Coolvetica;
				src: url(/fonts/coolvetica/coolvetica.otf) format("opentype");
				font-weight: 400;
				font-weight: normal;
				font-display: swap;
			}

			html,
			body {
				margin: 0;
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell",
					"Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
				-webkit-font-smoothing: antialiased;
				-moz-osx-font-smoothing: grayscale;
				width: 100%;
				overflow-x: hidden;
			}

			h1,
			h2,
			h3,
			h4,
			h5,
			h6 {
				margin: 0;
			}
		</style>
	</body>
</html>
